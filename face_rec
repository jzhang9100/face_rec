import cv2
import numpy as np


class face_fun:
    def __init__(self, dir):
        self.dir = dir  # dir where videos will be saved
        self.vidCap = cv2.VideoCapture(0)  # video capturer

    def recordVid(self):
        # create window to record face
        cv2.namedWindow("Face")
        i = 0
        if self.vidCap.isOpened():  # try to get the first frame
            retval, frame = self.vidCap.read()
            while retval:
                cv2.imshow("Face", frame)
                retval, frame = self.vidCap.read()
                if(i % 2 == 0):
                    cv2.imwrite(self.dir+'my_face'+str(i//2)+'.jpg', frame)
                i+=1
                key = cv2.waitKey(20)
                if key == 27:  # exit on ESC
                    break
            self.vidCap.release()
            cv2.destroyWindow("Face")

    def process_frame(self, img):
        img = cv2.resize(img, (640, 480))
        print(img.shape)
        img_arr = np.array(img)/255
        return img_arr
